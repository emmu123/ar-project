<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AR Server Visualization</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aframe/1.4.0/aframe.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ar.js/2.2.2/aframe-ar.min.js"></script>
    <style>
        body {
            margin: 0;
            font-family: 'Arial', sans-serif;
            background: #1a1a1a;
            color: white;
            overflow-x: hidden;
        }

        .controls {
            position: fixed;
            top: 20px;
            left: 20px;
            right: 20px;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .server-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .server-card {
            background: linear-gradient(135deg, #2d3748, #4a5568);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .server-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 255, 255, 0.3);
        }

        .server-name {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #00ffff;
        }

        .metric {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
            align-items: center;
        }

        .metric-bar {
            width: 60%;
            height: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }

        .metric-fill {
            height: 100%;
            background: linear-gradient(90deg, #00ff00, #ffff00, #ff0000);
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        .metric-value {
            font-weight: bold;
            min-width: 50px;
            text-align: right;
        }

        .ar-button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
        }

        .ar-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
        }

        .ar-scene {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 999;
            display: none;
        }

        .ar-scene.active {
            display: block;
        }

        .ar-overlay {
            position: fixed;
            top: 100px;
            left: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.9);
            padding: 20px;
            border-radius: 10px;
            z-index: 1001;
            display: none;
        }

        .ar-overlay.active {
            display: block;
        }

        .exit-ar {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1002;
            background: #ff4757;
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 10px;
        }

        .status-online { background: #2ecc71; }
        .status-warning { background: #f39c12; }
        .status-critical { background: #e74c3c; }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .ar-instructions {
            text-align: center;
            margin: 20px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <div class="controls">
        <h1 style="margin: 0 0 20px 0; text-align: center; background: linear-gradient(135deg, #667eea, #764ba2); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
            üöÄ AR Server Dashboard
        </h1>
        
        <div style="text-align: center; margin-bottom: 20px;">
            <button class="ar-button" onclick="startAR()">ü•Ω Launch AR View</button>
            <button class="ar-button" onclick="simulateLoad()">‚ö° Simulate Load</button>
            <button class="ar-button" onclick="resetServers()">üîÑ Reset All</button>
        </div>

        <div class="server-grid" id="serverGrid">
            <!-- Server cards will be populated by JavaScript -->
        </div>
    </div>

    <div class="ar-scene" id="arScene">
        <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;">
            <a-assets>
                <a-mixin id="server-base" 
                         geometry="primitive: box; width: 1; depth: 1"
                         animation__mouseenter="property: scale; to: 1.1 1.1 1.1; startEvents: mouseenter; dur: 200"
                         animation__mouseleave="property: scale; to: 1 1 1; startEvents: mouseleave; dur: 200">
                </a-mixin>
            </a-assets>

            <!-- Marker-based AR -->
            <a-marker preset="hiro" id="markerA">
                <!-- Server 1 -->
                <a-box id="server1-ar" 
                       mixin="server-base"
                       position="-2 0.5 0" 
                       material="color: #00ff00; opacity: 0.8; transparent: true"
                       text="value: Server 1\nCPU: 45%; align: center; color: white; position: 0 1.5 0">
                    <a-cylinder id="cpu1-ring" 
                               position="0 1 0" 
                               radius="0.6" 
                               height="0.1" 
                               material="color: #ffff00; opacity: 0.6; transparent: true"
                               animation="property: rotation; to: 0 360 0; loop: true; dur: 3000">
                    </a-cylinder>
                </a-box>

                <!-- Server 2 -->
                <a-box id="server2-ar" 
                       mixin="server-base"
                       position="0 0.5 0" 
                       material="color: #ffff00; opacity: 0.8; transparent: true"
                       text="value: Server 2\nCPU: 72%; align: center; color: white; position: 0 1.5 0">
                    <a-cylinder id="cpu2-ring" 
                               position="0 1 0" 
                               radius="0.6" 
                               height="0.1" 
                               material="color: #ff8800; opacity: 0.6; transparent: true"
                               animation="property: rotation; to: 0 360 0; loop: true; dur: 2000">
                    </a-cylinder>
                </a-box>

                <!-- Server 3 -->
                <a-box id="server3-ar" 
                       mixin="server-base"
                       position="2 0.5 0" 
                       material="color: #ff4444; opacity: 0.8; transparent: true"
                       text="value: Server 3\nCPU: 89%; align: center; color: white; position: 0 1.5 0">
                    <a-cylinder id="cpu3-ring" 
                               position="0 1 0" 
                               radius="0.6" 
                               height="0.1" 
                               material="color: #ff0000; opacity: 0.6; transparent: true"
                               animation="property: rotation; to: 0 360 0; loop: true; dur: 1000">
                    </a-cylinder>
                </a-box>

                <!-- Particles for network activity -->
                <a-entity id="particles" 
                         position="0 3 0"
                         particle-system="preset: snow; particleCount: 50; color: #00ffff, #ffffff">
                </a-entity>

                <!-- Ambient lighting -->
                <a-light type="ambient" color="#404040"></a-light>
                <a-light type="point" position="0 4 0" color="#ffffff"></a-light>
            </a-marker>

            <a-entity camera></a-entity>
        </a-scene>
        
        <button class="ar-button exit-ar" onclick="exitAR()">‚ùå Exit AR</button>
    </div>

    <div class="ar-overlay" id="arOverlay">
        <div class="ar-instructions">
            <h2>üì± AR Instructions</h2>
            <p>1. Point your camera at the <strong>Hiro marker</strong> (QR-like pattern)</p>
            <p>2. Keep the marker in view to see your servers in 3D</p>
            <p>3. Server height = CPU usage, Color = performance status</p>
            <p>4. Spinning rings show activity levels</p>
            <a href="https://github.com/AR-js-org/AR.js/blob/master/data/images/hiro.png" target="_blank" style="color: #00ffff;">Download Hiro Marker ‚Üí</a>
        </div>
    </div>

    <script>
        // Server data simulation
        let servers = [
            {
                name: "Web Server Alpha",
                id: "server1",
                cpu: 45,
                ram: 67,
                disk: 34,
                network: 123,
                status: "online",
                uptime: "15d 4h 23m"
            },
            {
                name: "Database Beta", 
                id: "server2",
                cpu: 72,
                ram: 84,
                disk: 56,
                network: 89,
                status: "warning",
                uptime: "8d 12h 45m"
            },
            {
                name: "App Server Gamma",
                id: "server3", 
                cpu: 89,
                ram: 91,
                disk: 78,
                network: 234,
                status: "critical",
                uptime: "3d 2h 15m"
            }
        ];

        function getStatusClass(status) {
            return `status-${status}`;
        }

        function getStatusColor(cpu) {
            if (cpu < 50) return "#00ff00";
            if (cpu < 80) return "#ffff00"; 
            return "#ff4444";
        }

        function renderServerCards() {
            const grid = document.getElementById('serverGrid');
            grid.innerHTML = '';
            
            servers.forEach((server, index) => {
                const card = document.createElement('div');
                card.className = 'server-card pulse';
                card.innerHTML = `
                    <div class="server-name">
                        <span class="status-indicator ${getStatusClass(server.status)}"></span>
                        ${server.name}
                    </div>
                    <div class="metric">
                        <span>CPU Usage</span>
                        <div class="metric-bar">
                            <div class="metric-fill" style="width: ${server.cpu}%"></div>
                        </div>
                        <span class="metric-value">${server.cpu}%</span>
                    </div>
                    <div class="metric">
                        <span>Memory</span>
                        <div class="metric-bar">
                            <div class="metric-fill" style="width: ${server.ram}%"></div>
                        </div>
                        <span class="metric-value">${server.ram}%</span>
                    </div>
                    <div class="metric">
                        <span>Disk Usage</span>
                        <div class="metric-bar">
                            <div class="metric-fill" style="width: ${server.disk}%"></div>
                        </div>
                        <span class="metric-value">${server.disk}%</span>
                    </div>
                    <div class="metric">
                        <span>Network I/O</span>
                        <span class="metric-value">${server.network} MB/s</span>
                    </div>
                    <div class="metric">
                        <span>Uptime</span>
                        <span class="metric-value">${server.uptime}</span>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function updateARServers() {
            servers.forEach((server, index) => {
                const serverEl = document.getElementById(`server${index + 1}-ar`);
                const ringEl = document.getElementById(`cpu${index + 1}-ring`);
                
                if (serverEl) {
                    // Update server box height based on CPU
                    const height = 0.5 + (server.cpu / 100) * 2;
                    serverEl.setAttribute('geometry', `primitive: box; width: 1; depth: 1; height: ${height}`);
                    serverEl.setAttribute('position', `${-2 + index * 2} ${height/2} 0`);
                    
                    // Update color based on performance
                    const color = getStatusColor(server.cpu);
                    serverEl.setAttribute('material', `color: ${color}; opacity: 0.8; transparent: true`);
                    
                    // Update text
                    serverEl.setAttribute('text', `value: ${server.name}\\nCPU: ${server.cpu}%; align: center; color: white; position: 0 ${height + 0.5} 0`);
                    
                    // Update ring animation speed
                    if (ringEl) {
                        const speed = Math.max(500, 4000 - (server.cpu * 40));
                        ringEl.setAttribute('animation', `property: rotation; to: 0 360 0; loop: true; dur: ${speed}`);
                        ringEl.setAttribute('position', `0 ${height + 0.3} 0`);
                    }
                }
            });
        }

        function startAR() {
            document.getElementById('arScene').classList.add('active');
            document.getElementById('arOverlay').classList.add('active');
            updateARServers();
        }

        function exitAR() {
            document.getElementById('arScene').classList.remove('active');
            document.getElementById('arOverlay').classList.remove('active');
        }

        function simulateLoad() {
            servers.forEach(server => {
                server.cpu = Math.min(100, server.cpu + Math.random() * 20 - 5);
                server.ram = Math.min(100, server.ram + Math.random() * 15 - 7);
                server.disk = Math.min(100, server.disk + Math.random() * 10 - 3);
                server.network = Math.max(0, server.network + Math.random() * 50 - 25);
                
                // Update status based on CPU
                if (server.cpu < 60) server.status = "online";
                else if (server.cpu < 85) server.status = "warning";
                else server.status = "critical";
            });
            
            renderServerCards();
            updateARServers();
        }

        function resetServers() {
            servers[0].cpu = 45; servers[0].ram = 67; servers[0].status = "online";
            servers[1].cpu = 72; servers[1].ram = 84; servers[1].status = "warning";
            servers[2].cpu = 89; servers[2].ram = 91; servers[2].status = "critical";
            
            renderServerCards();
            updateARServers();
        }

        // Auto-update every 3 seconds
        setInterval(() => {
            servers.forEach(server => {
                server.cpu += (Math.random() - 0.5) * 4;
                server.cpu = Math.max(0, Math.min(100, server.cpu));
                
                server.ram += (Math.random() - 0.5) * 3;
                server.ram = Math.max(0, Math.min(100, server.ram));
                
                server.network += (Math.random() - 0.5) * 20;
                server.network = Math.max(0, server.network);
                
                // Update status
                if (server.cpu < 60) server.status = "online";
                else if (server.cpu < 85) server.status = "warning"; 
                else server.status = "critical";
            });
            
            renderServerCards();
            updateARServers();
        }, 3000);

        // Initialize
        renderServerCards();
        
        // Handle AR scene clicks
        document.addEventListener('DOMContentLoaded', () => {
            const scene = document.querySelector('a-scene');
            if (scene) {
                scene.addEventListener('loaded', () => {
                    console.log('AR Scene loaded successfully!');
                });
            }
        });
    </script>
</body>
</html>
